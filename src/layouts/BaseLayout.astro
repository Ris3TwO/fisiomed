---
import "@/styles/global.css";
import Nav from "@/components/layout/Nav.astro";
import Footer from "@/components/layout/Footer.astro";
import Alert from "@/components/ui/Alert.astro";
import { ClientRouter } from "astro:transitions";
import { useTranslations } from "@/i18n/utils";
import { DEFAULT_LOCALE, type Locale } from "@/i18n/config";

const { title, isSubPage } = Astro.props;

const lang: Locale = Astro.currentLocale || DEFAULT_LOCALE;
const t = useTranslations(lang);
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>
      {title?.length > 0 ? title : t("homepage.title")} | {
        !isSubPage ? t("homepage.subtitle") : t("homepage.title")
      }
    </title>
    <ClientRouter />

    <!-- Precarga de H.H. Samuel (self-hosted) -->
    <link
      rel="preload"
      href="/assets/fonts/HHSamuel.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />

    <!-- Google Fonts para Roboto -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css"
    />

    <style>
      @font-face {
        font-family: "H.H. Samuel";
        src:
          url("/assets/fonts/HHSamuel.woff2") format("woff2"),
          url("/assets/fonts/HHSamuel.woff") format("woff");
        font-weight: 700 900;
        font-style: normal;
        font-display: swap;
      }
    </style>
  </head>
  <body class="scroll-smooth">
    <Alert />
    <Nav transition:persist isSubPage={isSubPage} />
    <main>
      <slot />
    </main>
    <Footer />
  </body>
</html>
